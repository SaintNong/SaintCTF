{% extends "base.html" %}
{% block title %}Solves{% endblock %}

{% block head %}
    {{ super() }}
    <style>
        html {
            scroll-behavior: smooth;
        }
        main {
            max-width: 80em;
            margin: 0 auto;
        }
        main > * {
            margin-bottom: 1em;
        }
        #scroll-container {
            overflow-x: auto;
        }
    </style>
{% endblock %}

{% block body %}
    <section class="card">
        <div class="link-row">
            <h2>Solve History</h2>
            <a href="javascript:window.scrollTo(0, document.body.scrollHeight);">Jump to bottom &darr;</a>
        </div>
        <div id="scroll-container">
            <table>
                <thead>
                    <tr>
                        <th>Solver</th>
                        <th></th>
                        <th>Challenge</th>
                        <th>Category</th>
                        <th>Difficulty</th>
                        <th>Points</th>
                        <th>Time</th>
                    </tr>
                </thead>

                <tbody>
                    {% for solve in solves %}
                        <tr {% if solve.user.username == current_user.username %}
                            class="highlight"
                            {% endif %}
                            >
                            <td>{{ solve.user.username }}</td>
                            {% if solve.id in first_blood %}
                            <td title="First blood">üèÜ</td>
                            {% else %}
                            <td></td>
                            {% endif %}
                            <td>{{ challenges[solve.challenge_id].name }}</td>
                            <td>{{ challenges[solve.challenge_id].category }}</td>
                            <td>{{ challenges[solve.challenge_id].difficulty }}</td>
                            <td>{{ challenges[solve.challenge_id].points }}</td>
                            <td><time datetime="{{ solve.time }}">{{ solve.time | time_ago }}</time></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <section class="card">
        <h2>Legend</h2>
        <p>üèÜ &mdash; First blood</p>
    </section>
{% endblock %}
